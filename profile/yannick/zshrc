##
## Cutom settings for Zsh
##

# Activate spell check:
setopt correct

# Activate bang history:
setopt bang_hist

# Better safe that sorry:
alias_set rm "rm -i"
alias_set mv "mv -iv"
alias_set cp "cp -iv"

# ./foo.mp3 will open the file with mplayer,
# and so on:
alias -s mp3=mplayer
alias -s avi=mplayer
alias -s pdf=evince
alias -s html=firefox

# Add $HOME/bin to path:
# (pretty standard)
export PATH="$PATH:$HOME/bin"

# Let your term surpise you!
null_which fortune && fortune -s

# Function for always using one (and only one) vim server, even when not
# using gvim.
# If you really want a new vim session, simply do not pass any
# argument to this function.
function vim {
  local vim_orig=$(which 2>/dev/null vim)
  if [ -z $vim_orig ]; then
    echo "$SHELL: vim: command not found"
    return 127;
  fi
  $vim_orig --serverlist | grep -q VIM
  # If there is already a vimserver, use it
  # unless no args were given
  if [ $? -eq 0 ]; then
    if [ $# -eq 0 ]; then
      $vim_orig
    else
      $vim_orig --remote "$@"
    fi
  else
    $vim_orig --servername vim "$@"
  fi
}
